<!-- Job Posting Modal -->
<div class="modal fade" id="jobPostModal" tabindex="-1" aria-labelledby="jobPostModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic-info" type="button" role="tab">Basic Information</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="location-tab" data-bs-toggle="tab" data-bs-target="#location-info" type="button" role="tab">Location</button>
                    </li>
                </ul>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="post" enctype="multipart/form-data" id="jobPostForm">
                    {% csrf_token %}
                    <div class="tab-content">
                        <!-- Basic Information Tab -->
                        <div class="tab-pane fade show active" id="basic-info" role="tabpanel">
                            <div class="row mb-3">
                                <div class="col-12">
                                    <label for="{{ form.profile_image.id_for_label }}" class="form-label">
                                        Upload Profile Image
                                        <span class="text-muted">(Max 4MB)</span>
                                    </label>
                                    {{ form.profile_image }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-12">
                                    <label for="{{ form.title.id_for_label }}" class="form-label">Job Title *</label>
                                    {{ form.title }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-12">
                                    <label for="{{ form.description.id_for_label }}" class="form-label">Job Description *</label>
                                    {{ form.description }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.category.id_for_label }}" class="form-label">Job Category *</label>
                                    {{ form.category }}
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.job_type.id_for_label }}" class="form-label">Job Type *</label>
                                    {{ form.job_type }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.job_level.id_for_label }}" class="form-label">Job Level *</label>
                                    {{ form.job_level }}
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.experience.id_for_label }}" class="form-label">Experience *</label>
                                    {{ form.experience }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.qualification.id_for_label }}" class="form-label">Qualification *</label>
                                    {{ form.qualification }}
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.gender.id_for_label }}" class="form-label">Gender *</label>
                                    {{ form.gender }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.min_salary.id_for_label }}" class="form-label">Min. Salary *</label>
                                    {{ form.min_salary }}
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.max_salary.id_for_label }}" class="form-label">Max. Salary *</label>
                                    {{ form.max_salary }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.expired_date.id_for_label }}" class="form-label">Job Expired Date *</label>
                                    {{ form.expired_date }}
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.required_skills.id_for_label }}" class="form-label">Required Skills</label>
                                    {{ form.required_skills }}
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" id="saveAndNext">Save & Next</button>
                            </div>
                        </div>
                        
                        <!-- Location Tab -->
                        <div class="tab-pane fade" id="location-info" role="tabpanel">
                            <div class="row mb-3">
                                <div class="col-12">
                                    <label for="{{ form.address.id_for_label }}" class="form-label">Address *</label>
                                    {{ form.address }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="{{ form.country.id_for_label }}" class="form-label">Country *</label>
                                    {{ form.country }}
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.city.id_for_label }}" class="form-label">City *</label>
                                    {{ form.city }}
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-12">
                                    <label for="{{ form.contact.id_for_label }}" class="form-label">Contact *</label>
                                    {{ form.contact }}
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" id="backToBasic">Back</button>
                                <button type="submit" class="btn btn-primary">Post</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Add this CSS to your stylesheet -->
<style>
.nav-tabs {
    border-bottom: none;
}
.nav-tabs .nav-link {
    border: none;
    color: #666;
    padding: 10px 20px;
}
.nav-tabs .nav-link.active {
    color: #0d6efd;
    border-bottom: 2px solid #0d6efd;
    background: none;
}
.form-label {
    font-weight: 500;
    margin-bottom: 0.5rem;
}
.form-label .text-muted {
    font-weight: normal;
    font-size: 0.875rem;
}
.modal-footer {
    border-top: none;
    padding: 1rem;
}
.btn-primary {
    background-color: #0d6efd;
    border-color: #0d6efd;
}
.btn-primary:hover {
    background-color: #0b5ed7;
    border-color: #0a58ca;
}
</style>

<!-- Add this JavaScript to your script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('jobPostModal');
    const basicTab = document.getElementById('basic-tab');
    const locationTab = document.getElementById('location-tab');
    const saveAndNextBtn = document.getElementById('saveAndNext');
    const backToBasicBtn = document.getElementById('backToBasic');
    const form = document.getElementById('jobPostForm');

    if (modal) {
        modal.addEventListener('shown.bs.modal', function() {
            basicTab.focus();
        });
    }

    // Function to validate basic info fields
    function validateBasicInfo() {
        const requiredFields = [
            'title', 'description', 'category', 'job_type', 'job_level',
            'experience', 'qualification', 'gender', 'min_salary', 'max_salary',
            'expired_date'
        ];
        
        for (const fieldName of requiredFields) {
            const field = form.querySelector(`[name="${fieldName}"]`);
            if (!field.value) {
                alert(`Please fill in the ${fieldName.replace('_', ' ')} field`);
                field.focus();
                return false;
            }
        }
        return true;
    }

    // Save & Next button click handler
    if (saveAndNextBtn) {
        saveAndNextBtn.addEventListener('click', function() {
            if (validateBasicInfo()) {
                // Switch to location tab
                const locationTabInstance = new bootstrap.Tab(locationTab);
                locationTabInstance.show();
            }
        });
    }

    // Back button click handler
    if (backToBasicBtn) {
        backToBasicBtn.addEventListener('click', function() {
            const basicTabInstance = new bootstrap.Tab(basicTab);
            basicTabInstance.show();
        });
    }

    // Prevent tab switching if basic info is not filled
    if (locationTab) {
        locationTab.addEventListener('click', function(event) {
            if (!validateBasicInfo()) {
                event.preventDefault();
                event.stopPropagation();
            }
        });
    }
});
</script> 